!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("@angular/common"),require("@angular/forms")):"function"==typeof define&&define.amd?define("alphabet-filter",["exports","@angular/core","@angular/common","@angular/forms"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self)["alphabet-filter"]={},t.ng.core,t.ng.common,t.ng.forms)}(this,(function(t,e,n,r){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */Object.create;function i(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function o(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),l=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)l.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return l}Object.create;var l=function(){function t(){}return t.prototype.transform=function(t,e,n){return void 0===n&&(n=!1),t&&Array.isArray(t)&&e&&"object"==typeof e?t.filter((function(t){var r=!0;for(var i in e)if(null!=e[i]&&null!=t[i]&&e.hasOwnProperty(i)){var o=e[i],l=t[i];if(!Array.isArray(e[i])&&"[object Object]"!==Object.prototype.toString.call(e[i])&&(l=l.toString().toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,""),o=o.toString().toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,""),!n&&l.indexOf(o)<0||n&&!l.startsWith(o)))return void(r=!1)}return r})):t},t}();l.decorators=[{type:e.Pipe,args:[{name:"filter"}]}];var a=function(){function t(t,n,r){this.filter=t,this.renderer=n,this.formBuilder=r,this.height="300px",this.propAlphaOrder="",this.propsSearch=[],this.data=[],this.placeholder="digite sua busca",this.listClass=null,this.withTemplate=!1,this.noSmoothScroll=!1,this.onCancel=new e.EventEmitter,this.onClick=new e.EventEmitter,this.closed=!1,this.inputFocused=!1,this.heightContent=0,this.alphabet=[],this.currentAlpha="",this.currentLetterElement=null,this.hiddenTitle=!1,this.lettersListHeight=0,this.indicatorClicked=!1,this.goingToLetter=!1;for(var i=0;i<26;i++)this.alphabet.push(String.fromCharCode(97+i).toUpperCase());this.form=this.formBuilder.group({search:[null]}),this.form.get("search").valueChanges.subscribe(this.setFilter.bind(this))}return t.prototype.ngOnInit=function(){var t=this;setTimeout((function(){t.renderer.listen(t.searchListEl.nativeElement,"scroll",t.onScrollList.bind(t)),t.renderer.listen(t.contentEl.nativeElement,"mouseup",t.onMouseUpContent.bind(t)),t.renderer.listen(t.contentEl.nativeElement,"mousemove",t.onMouseMoveContent.bind(t)),t.renderer.listen(t.indicatorEl.nativeElement,"mousedown",t.onMouseDownIndicator.bind(t)),t.renderer.listen(t.indicatorEl.nativeElement,"mouseup",t.onMouseUpIndicator.bind(t)),t.heightContent=t.contentEl.nativeElement.clientHeight+(t.onCancel?20:37),t.lettersListHeight=t.letterList.nativeElement.children[0].clientHeight,t.focusInput()}),100)},t.prototype.ngOnChanges=function(t){var e,n,r=this;if("data"in t&&(this.data=this.orderBy(),this.data&&this.propAlphaOrder&&(this.data.forEach((function(t){var e=t[r.propAlphaOrder].substr(0,1);t.$letter=e.toUpperCase(),t.$class="let-"+e.toLowerCase()})),setTimeout((function(){return r.defineCurrentLetterElement()}),100))),"propsSearch"in t&&this.propsSearch){"string"==typeof this.propsSearch&&(this.propsSearch=[this.propsSearch]),this.objFilter={};try{for(var o=i(this.propsSearch),l=o.next();!l.done;l=o.next()){var a=l.value;this.objFilter[a]=null}}catch(t){e={error:t}}finally{try{l&&!l.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}this.setFilter()}},t.prototype.defineCurrentLetterElement=function(){var t,e;if(!this.goingToLetter){var n=this.searchListEl.nativeElement.getBoundingClientRect().top,r=[],o=null,l=function(t){var e,l,a="";try{for(var s=(e=void 0,i(t.classList)),c=s.next();!c.done;c=s.next()){var h=c.value;if(h.startsWith("let-")){a=h;break}}}catch(t){e={error:t}}finally{try{c&&!c.done&&(l=s.return)&&l.call(s)}finally{if(e)throw e.error}}0===r.filter((function(t){return t.classList.contains(a)})).length&&(r.push(t),t.getBoundingClientRect().top-20<n&&(o=t))};try{for(var a=i(this.searchListEl.nativeElement.children),s=a.next();!s.done;s=a.next()){l(s.value)}}catch(e){t={error:e}}finally{try{s&&!s.done&&(e=a.return)&&e.call(a)}finally{if(t)throw t.error}}o&&o!==this.currentLetterElement?(o.children[0].position=o.children[0].innerHTML.charCodeAt(0)-65,this.currentLetterElement=o,this.currentAlpha=o.children[0].innerHTML):o||(this.currentLetterElement=null,this.currentAlpha="")}},t.prototype.goLetter=function(t){var e,n,r=this;this.currentAlpha=t;var l=function(e){var n,l,s="";try{for(var c=(n=void 0,i(e.classList)),h=c.next();!h.done;h=c.next()){var p=h.value;if(p.startsWith("let-")){s=p.replace("let-","").toUpperCase();break}}}catch(t){n={error:t}}finally{try{h&&!h.done&&(l=c.return)&&l.call(c)}finally{if(n)throw n.error}}if(t===s){e.children[0].position=e.children[0].innerHTML.charCodeAt(0)-65,a.currentLetterElement=e;var u=function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(o(arguments[e]));return t}(a.searchListEl.nativeElement.children).find((function(e){var n=e.classList.value.split(" ");return!!(n.length>0&&n[n.length-1].includes("-"))&&n[n.length-1].split("-")[1].toUpperCase()===t}));if(u){var d=a.searchListEl.nativeElement.scrollHeight-a.searchListEl.nativeElement.clientHeight,f=Math.min(d,u.offsetTop);a.searchListEl.nativeElement.scrollTo({left:0,top:f,behavior:"smooth"}),a.goingToLetter=!0;var v=setInterval((function(){f===r.searchListEl.nativeElement.scrollTop&&(clearInterval(v),r.goingToLetter=!1)}),60)}return"break"}},a=this;try{for(var s=i(this.searchListEl.nativeElement.children),c=s.next();!c.done;c=s.next()){if("break"===l(c.value))break}}catch(t){e={error:t}}finally{try{c&&!c.done&&(n=s.return)&&n.call(s)}finally{if(e)throw e.error}}},t.prototype.onMouseMoveContent=function(t){var e,n;if(!this.form.get("search").value&&this.indicatorClicked)try{for(var r=i(this.letterList.nativeElement.children),o=r.next();!o.done;o=r.next()){var l=o.value;if(l.classList.contains("contains")){var a=l.getBoundingClientRect(),s={top:a.y,bottom:a.y+l.clientHeight};if(t.clientY>=s.top&&t.clientY<=s.bottom){this.currentAlpha!==l.children[0].innerHTML&&this.goLetter(l.children[0].innerHTML);break}}}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}},t.prototype.onMouseDownIndicator=function(t){0===t.button&&(this.indicatorClicked=!0)},t.prototype.onMouseUpIndicator=function(t){this.indicatorClicked=!1},t.prototype.onMouseUpContent=function(t){this.indicatorClicked=!1},t.prototype.onScrollList=function(t){this.goingToLetter||this.indicatorClicked||this.defineCurrentLetterElement()},t.prototype.onMouseWheelContent=function(t){},t.prototype.onKeyDownContent=function(t){var e=t,n=e.key||e.keyIdentifier||e.keyCode;27!==n&&"Escape"!==n||this.close()},t.prototype.click=function(t){void 0===t&&(t=null),this.onClick.emit(t)},t.prototype.close=function(){this.onCancel.observers.length>0&&this.onCancel.emit()},t.prototype.focusInput=function(){this.inputSearchEl.nativeElement.focus()},t.prototype.startsWithLetter=function(t){var e=this,n=t.toUpperCase();return this.filter.transform(this.data,this.objFilter,!0).filter((function(t){return t[e.propAlphaOrder].toUpperCase().startsWith(n)})).length>0},t.prototype.setFilter=function(){var t=this;this.objFilter&&(Object.keys(this.objFilter).forEach((function(e){t.objFilter[e]=t.form.get("search").value})),this.objFilter=Object.assign({},this.objFilter),setTimeout((function(){return t.defineCurrentLetterElement()}),100))},t.prototype.clearFilter=function(){this.form.get("search").setValue(null),this.setFilter()},t.prototype.orderBy=function(){var t=this;return this.data.sort((function(e,n){return e[t.propAlphaOrder].toUpperCase()<n[t.propAlphaOrder].toUpperCase()?-1:e[t.propAlphaOrder].toUpperCase()>n[t.propAlphaOrder].toUpperCase()?1:0}))},t.prototype.ngOnDestroy=function(){},t}();a.decorators=[{type:e.Component,args:[{selector:"alphabet-filter",template:'<div class="alpha-search" [ngStyle]="{\'height\': height}">\n  <div #content class="alpha-search-content" [ngClass]="{\'hidden-title\': hiddenTitle}">\n\n    <button class="close-button" *ngIf="onCancel.observers.length > 0" (click)="close()" [ngClass]="{\'fadeEnter\': !closed, \'fadeExit\': closed}" title="Fechar">\n      <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 212.982 212.982" xml:space="preserve">\n        <g>\n          <path style="fill-rule:evenodd;clip-rule:evenodd;" d="M131.804,106.491l75.936-75.936c6.99-6.99,6.99-18.323,0-25.312\n            c-6.99-6.99-18.322-6.99-25.312,0l-75.937,75.937L30.554,5.242c-6.99-6.99-18.322-6.99-25.312,0c-6.989,6.99-6.989,18.323,0,25.312\n            l75.937,75.936L5.242,182.427c-6.989,6.99-6.989,18.323,0,25.312c6.99,6.99,18.322,6.99,25.312,0l75.937-75.937l75.937,75.937\n            c6.989,6.99,18.322,6.99,25.312,0c6.99-6.99,6.99-18.322,0-25.312L131.804,106.491z"/>\n        </g>\n      </svg> \n    </button>\n\n    <div #inputBody class="alpha-search-input" (click)="focusInput()" [ngClass]="{\'fadeEnter\': !closed, \'fadeExit\': closed}">\n      <div class="icon">\n        <svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" xmlns:xlink="http://www.w3.org/1999/xlink">\n          <g>\n            <path d="M495,466.2L377.2,348.4c29.2-35.6,46.8-81.2,46.8-130.9C424,103.5,331.5,11,217.5,11C103.4,11,11,103.5,11,217.5   S103.4,424,217.5,424c49.7,0,95.2-17.5,130.8-46.7L466.1,495c8,8,20.9,8,28.9,0C503,487.1,503,474.1,495,466.2z M217.5,382.9   C126.2,382.9,52,308.7,52,217.5S126.2,52,217.5,52C308.7,52,383,126.3,383,217.5S308.7,382.9,217.5,382.9z"/>\n          </g>\n        </svg>        \n      </div>\n      <form [formGroup]="form">\n\t\t<input #inputSearch type="text" formControlName="search" [placeholder]="placeholder" autofocus/>\n\t  </form>\n      <div class="icon" (click)="clearFilter()" *ngIf="form.controls.search.value">\n        <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 212.982 212.982" xml:space="preserve">\n          <g>\n            <path style="fill-rule:evenodd;clip-rule:evenodd;" d="M131.804,106.491l75.936-75.936c6.99-6.99,6.99-18.323,0-25.312\n              c-6.99-6.99-18.322-6.99-25.312,0l-75.937,75.937L30.554,5.242c-6.99-6.99-18.322-6.99-25.312,0c-6.989,6.99-6.989,18.323,0,25.312\n              l75.937,75.936L5.242,182.427c-6.989,6.99-6.989,18.323,0,25.312c6.99,6.99,18.322,6.99,25.312,0l75.937-75.937l75.937,75.937\n              c6.989,6.99,18.322,6.99,25.312,0c6.99-6.99,6.99-18.322,0-25.312L131.804,106.491z"/>\n          </g>\n        </svg>      \n      </div>\n    </div>\n\n    <div class="alpha-search-area" [ngClass]="{\'fadeEnter\': !closed, \'fadeExit\': closed}">\n      <ul #searchList class="search-list" [ngClass]="listClass" [ngStyle]="indicatorClicked ? {\'overflow\': \'hidden\'} : {}">\n        <li *ngFor="let item of data | filter:objFilter:true" [ngClass]="item.$class" class="fadeEnter">\n          <span [innerHtml]="item.$letter"></span>\n          <div class="search-item-data" (click)="click(item)">\n            <ng-container *ngIf="withTemplate" [ngTemplateOutlet]="templateRef" [ngTemplateOutletContext]="{ $implicit: item }"></ng-container>\n            <span *ngIf="!withTemplate">{{item.name}}</span>\n          </div>\n        </li>\n      </ul>\n    </div>\n\n    <div #indicator class="alpha-indicator no-select" [ngClass]="{\'fadeEnter\': currentLetterElement, \'fadeExit\': !currentLetterElement}" [ngStyle]="{\'top\': ((currentLetterElement?.children[0].position * lettersListHeight) + 77) + \'px\'}">\n      <div>\n        <div>\n          <span>{{currentLetterElement?.children[0].innerHTML}}</span>\n        </div>\n      </div>\n      <div>\n        <span>{{currentLetterElement?.children[0].innerHTML}}</span>\n        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 55.69 122.242">\n          <g id="guia" transform="translate(-1288 -436.211)">\n              <path id="Path_4084" d="M-13643.358-21865.281l-55.629-.09a4.4 4.4 0 0 0 0 .711c.035.008-.083 10.844 17.217 22.045 19.523 12.643 38.459 38.025 38.459 38.025z" data-name="Path 4084" transform="translate(14986.999 22362.5)"/>\n              <path id="Path_4085" d="M-13643.354-21803.814l-55.632-.094c.035-.008-.083-12.236 17.218-23.437 19.524-12.643 38.461-38.023 38.461-38.023z" data-name="Path 4085" transform="translate(14986.998 22301.55)"/>\n          </g>\n        </svg>\n      </div>\n    </div>\n\n    <section #letterList>\n      <div class="alpha-letters-list" *ngFor="let letter of alphabet" (click)="goLetter(letter)" [ngClass]="{\'contains\': currentLetterElement?.children[0].innerHTML !== letter && startsWithLetter(letter), \'actived\': currentLetterElement?.children[0].innerHTML === letter}">\n        <span>{{letter}}</span>\n        <i></i>\n      </div>\n    </section>\n\n  </div>\n</div>\n',host:{"(document:mousewheel)":"onMouseWheelContent($event)","(document:keydown)":"onKeyDownContent($event)"}}]}],a.ctorParameters=function(){return[{type:l},{type:e.Renderer2},{type:r.FormBuilder}]},a.propDecorators={templateRef:[{type:e.ContentChild,args:[e.TemplateRef]}],inputBodyEl:[{type:e.ViewChild,args:["inputBody"]}],inputSearchEl:[{type:e.ViewChild,args:["inputSearch"]}],searchListEl:[{type:e.ViewChild,args:["searchList"]}],letterList:[{type:e.ViewChild,args:["letterList"]}],indicatorEl:[{type:e.ViewChild,args:["indicator"]}],contentEl:[{type:e.ViewChild,args:["content"]}],height:[{type:e.Input}],propAlphaOrder:[{type:e.Input}],propsSearch:[{type:e.Input}],data:[{type:e.Input}],placeholder:[{type:e.Input}],listClass:[{type:e.Input}],withTemplate:[{type:e.Input}],noSmoothScroll:[{type:e.Input}],onCancel:[{type:e.Output}],onClick:[{type:e.Output}]};var s=function(){};s.decorators=[{type:e.NgModule,args:[{imports:[n.CommonModule,r.ReactiveFormsModule],exports:[a],declarations:[a,l],providers:[l]}]}],t.AlphabetFilterComponent=a,t.AlphabetFilterModule=s,t.ɵa=l,Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=alphabet-filter.umd.min.js.map